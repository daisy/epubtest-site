{%- extends 'base/admin-base.html' -%}
{%- import "components/testing-environment-title.html" as testingEnvironmentTitle -%}
{%- import "components/testing-environments-table.html" as testingEnvironmentsTable -%}
{%- set title = "Admin: Testing Environments" -%}

{%- block content -%}

<main>
    <h2>Testing Environments</h2>

    <p>Below, all testing environments are listed and organized into current, archived, published, and unpublished. Select one to view details and edit results per topic.</p>

    <div id="current">
        <h3>Current testing environments</h3>
        <div id="current-published">
            <h4>With published results</h4>
            {{ testingEnvironmentsTable.TestingEnvironmentsTable (publicTestingEnvironments) }}
            
        </div>
        <div id="current-unpublished">
            <h4>With unpublished results</h4>
            {{ testingEnvironmentsTable.TestingEnvironmentsTable (unpublishedTestingEnvironments) }}
        </div>
    </div>

    <div id="archived">
        <h3>Archived</h3>
        <div id="archived-published">
            <h4>With published results</h4>
            {{ testingEnvironmentsTable.TestingEnvironmentsTable (publicArchivedTestingEnvironments) }}
        </div>

        <div id="archived-unpublished">
            <h4>With unpublished results</h4>
            {{ testingEnvironmentsTable.TestingEnvironmentsTable (unpublishedArchivedTestingEnvironments) }}
        </div>
    </div>

    {#<div id="noresults">
        <h3>Testing Environments with no results</h3>
        {{ TestingEnvironmentList (noResultsTestingEnvironments) }}
    </div>#}
</main>

{%- endblock -%}

{%- block nav -%}
<nav aria-label="Testing environments navigation">
    <h2>By status</h2>
    <ul>
        <li><a href="#current">Current Testing Environments</a>
            <ul>
                <li><a href="#current-published">With published results</a></li>
                <li><a href="#current-unpublished">With unpublished results</a></li>
            </ul>
        </li>
        <li><a href="#archived">Archived Testing Environments</a>
            <ul>
                <li><a href="#archived-published">With published results</a></li>
                <li><a href="#archived-unpublished">With unpublished results</a></li>
            </ul>
        </li>
        {#<li><a href="#noresults">Testing Environments with no results</a></li>#}
    </ul>
</nav>
{%- endblock -%}

{%- macro TestingEnvironmentList(testingEnvironments) -%}
<ul>
    {%- for testingEnvironment in testingEnvironments -%}
    <li id="{{testingEnvironment.id}}">
        <a href="/admin/testing-environment/{{testingEnvironment.id}}">
            {{ testingEnvironmentTitle.TestingEnvironmentTitle (testingEnvironment, true) }}
        </a>
    </li>
    {%- endfor -%}
</ul>
{%- endmacro -%}
