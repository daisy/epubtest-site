{%- extends 'base/htmleton.html' -%}
{%- block head -%}

<title>epubtest.org{%- if title -%}: {{ title }}{%- endif -%}</title>
{%- block script -%}
{%- endblock -%}
{%- endblock -%}

{%- block body -%}
<header>
    <h1><a href="/">epubtest.org</a></h1>
    <nav {% if accessLevel == 'admin' %}aria-label="Main"{% endif %}>
        <ul id="main">
            <li><a href='/results'>Results</a></li>
            <li><a href='/test-books'>Test Books</a></li>
            <li><a href='/participate'>Participate</a></li>
            <li><a href='/about'>About</a></li>
        </ul>
        <ul id="user">
        {%- if accessLevel == 'public' -%}
            <li><a href='/login'>Login</a></li>
        {%- else -%}
            <li><a href='/user/dashboard'>Dashboard</a></li>
            {# reintroduce later
            <li><a href='/user/profile'>Profile</a></li>
            #}
            <li>
                <form method="POST" action="/forms/logout">
                    <input type="submit" name="submit" value="Logout"/>
                </form>
            </li>
        {%- endif -%}
        </ul>
    </nav>
    
</header>
{%- if accessLevel == 'admin' -%}
    <nav id="admin-nav" aria-labelledby="admin-nav-title">
        <h1 id="admin-nav-title">Admin:</h1>
        <ul> 
            <li><a href="/admin/requests">Manage Requests</a></li>
            <li><a href="/admin/testing">Manage Testing</a></li>
            <li><a href="/admin/test-books">Manage Test Books</a></li>
            <li><a href="/admin/users">Manage Users</a></li>
        </ul>
    </nav>
{%- endif -%}
<main class="{{mainclass}}">
    

    <aside id="error"></aside>

    {%- block content -%}
    {%- endblock -%}
</main>
<footer>
<span>Â© 2019 <a href="https://daisy.org">DAISY Consortium</a></span>
</footer>

<script type="text/javascript">

    window.addEventListener("load", () => {
        const params = new URLSearchParams(window.location.search);  
        let elm = document.getElementById("error");
        if (params.has("error")) {
            elm.textContent = params.get("error");
        }
        else {
            elm.textContent = '';
        }
    });
  
</script>

{%- endblock -%}
